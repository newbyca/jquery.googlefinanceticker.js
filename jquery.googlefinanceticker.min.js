jQuery.fn.googlefinanceticker=function(a){"use strict";this.settings=jQuery.extend({velocity:.1,tickers:"goog,aapl,msft,csco,intc,ibm,att,bidu",refresh:1e3*60*15},this.settings);var b=$(this);b.addClass("googlefinanceticker");b.html('<div class="mask"><div class="tickertape"></div><div class="left-blind"></div><div class="right-blind"></div></div>');var c=$(b.children().eq(0).children().eq(0));this.initialize=function(){b.width(b.width());$.extend(c,{settings:this.settings});$.extend(c,{resetScroll:this.resetScroll});this.loadFeed();setInterval(this.loadFeed,this.settings.refresh)};this.loadFeed=function(){var a=this.getFeedUrl();$.getJSON(a,function(a){var b="";$.each(a,function(a,c){b+='<a target="_blank" href="http://www.google.com/finance?q='+c.t+'">'+c.name+"</a>"+"<span>";if(c.l.toString().length>0){b+=c.l}if(c.c.toString().length>0){b+="  "+c.c+"%"}b+="</span>"});c.html(b);c.resetScroll()})};this.getFeedUrl=function(){var b="http://www.google.com/finance/info?infotype=infoquoteall&q="+a.tickers+"&callback=?";return b};this.resetScroll=function(){function g(a,b){c.animate({left:"-="+a},b,"linear",function(){c.css("left",d);g(e,f)})}var a=0;c.children().each(function(b,c){a+=$(c).outerWidth(true)});c.width(a);var d=b.outerWidth(true);var e=d+c.outerWidth(true);var f=e/c.settings.velocity;c.css("left",d);g(e,f);c.hover(function(){jQuery(this).stop()},function(){var a=d-c.position().left;var b=a/c.settings.velocity;g(a,b)})};this.initialize()}